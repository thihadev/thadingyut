{"ast":null,"code":"import{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{motion}from'framer-motion';import{ref,onValue,query,orderByChild,limitToLast}from'firebase/database';import{database}from'../firebase';import{setWishes,addWish,setTotalCount}from'../store/wishesSlice';import Lantern from'./Lantern';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LanternSky=()=>{const{wishes,totalCount}=useSelector(state=>state.wishes);const dispatch=useDispatch();useEffect(()=>{// Listen for latest 50 wishes\nconst wishesQuery=query(ref(database,'wishes'),orderByChild('timestamp'),limitToLast(50));const unsubscribe=onValue(wishesQuery,snapshot=>{if(snapshot.exists()){const data=snapshot.val();const wishesArray=Object.values(data).reverse();// Latest first\ndispatch(setWishes(wishesArray));}});// Get total count for display\nconst countRef=ref(database,'wishes');const countUnsubscribe=onValue(countRef,snapshot=>{if(snapshot.exists()){const data=snapshot.val();dispatch(setTotalCount(Object.keys(data).length));}});return()=>{unsubscribe();countUnsubscribe();};},[dispatch]);// Create stars background\nconst stars=Array.from({length:100},(_,i)=>/*#__PURE__*/_jsx(motion.div,{className:\"absolute bg-white rounded-full\",style:{left:\"\".concat(Math.random()*100,\"%\"),top:\"\".concat(Math.random()*100,\"%\"),width:\"\".concat(Math.random()*3+1,\"px\"),height:\"\".concat(Math.random()*3+1,\"px\")},animate:{opacity:[0.3,1,0.3]},transition:{duration:2,repeat:Infinity,delay:Math.random()*2}},i));return/*#__PURE__*/_jsxs(\"div\",{className:\"relative min-h-screen overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 pointer-events-none\",children:stars}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg p-4 text-white z-10\",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:1},children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Total Wishes: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-yellow-400\",children:totalCount.toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Latest: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-blue-400\",children:wishes.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full h-full\",children:wishes.map((wish,index)=>/*#__PURE__*/_jsx(Lantern,{wish:wish,index:index},wish.id||index))}),/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 pointer-events-none\",children:Array.from({length:20},(_,i)=>/*#__PURE__*/_jsx(motion.div,{className:\"absolute w-1 h-1 bg-yellow-400/50 rounded-full\",style:{left:\"\".concat(Math.random()*100,\"%\"),top:\"\".concat(Math.random()*100,\"%\")},animate:{y:[0,-100,0],opacity:[0,1,0]},transition:{duration:4,repeat:Infinity,delay:Math.random()*4,ease:\"easeInOut\"}},i))})]});};export default LanternSky;","map":{"version":3,"names":["useEffect","useSelector","useDispatch","motion","ref","onValue","query","orderByChild","limitToLast","database","setWishes","addWish","setTotalCount","Lantern","jsx","_jsx","jsxs","_jsxs","LanternSky","wishes","totalCount","state","dispatch","wishesQuery","unsubscribe","snapshot","exists","data","val","wishesArray","Object","values","reverse","countRef","countUnsubscribe","keys","length","stars","Array","from","_","i","div","className","style","left","concat","Math","random","top","width","height","animate","opacity","transition","duration","repeat","Infinity","delay","children","initial","x","toLocaleString","map","wish","index","id","y","ease"],"sources":["/Users/thiha/AmazonQ/thadingyut/src/components/LanternSky.jsx"],"sourcesContent":["import { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { motion } from 'framer-motion';\nimport { ref, onValue, query, orderByChild, limitToLast } from 'firebase/database';\nimport { database } from '../firebase';\nimport { setWishes, addWish, setTotalCount } from '../store/wishesSlice';\nimport Lantern from './Lantern';\n\nconst LanternSky = () => {\n  const { wishes, totalCount } = useSelector((state) => state.wishes);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    // Listen for latest 50 wishes\n    const wishesQuery = query(\n      ref(database, 'wishes'),\n      orderByChild('timestamp'),\n      limitToLast(50)\n    );\n\n    const unsubscribe = onValue(wishesQuery, (snapshot) => {\n      if (snapshot.exists()) {\n        const data = snapshot.val();\n        const wishesArray = Object.values(data).reverse(); // Latest first\n        dispatch(setWishes(wishesArray));\n      }\n    });\n\n    // Get total count for display\n    const countRef = ref(database, 'wishes');\n    const countUnsubscribe = onValue(countRef, (snapshot) => {\n      if (snapshot.exists()) {\n        const data = snapshot.val();\n        dispatch(setTotalCount(Object.keys(data).length));\n      }\n    });\n\n    return () => {\n      unsubscribe();\n      countUnsubscribe();\n    };\n  }, [dispatch]);\n\n  // Create stars background\n  const stars = Array.from({ length: 100 }, (_, i) => (\n    <motion.div\n      key={i}\n      className=\"absolute bg-white rounded-full\"\n      style={{\n        left: `${Math.random() * 100}%`,\n        top: `${Math.random() * 100}%`,\n        width: `${Math.random() * 3 + 1}px`,\n        height: `${Math.random() * 3 + 1}px`,\n      }}\n      animate={{\n        opacity: [0.3, 1, 0.3]\n      }}\n      transition={{\n        duration: 2,\n        repeat: Infinity,\n        delay: Math.random() * 2\n      }}\n    />\n  ));\n\n  return (\n    <div className=\"relative min-h-screen overflow-hidden\">\n      {/* Stars Background */}\n      <div className=\"fixed inset-0 pointer-events-none\">\n        {stars}\n      </div>\n\n      {/* Stats Display */}\n      <motion.div\n        className=\"absolute top-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg p-4 text-white z-10\"\n        initial={{ opacity: 0, x: 50 }}\n        animate={{ opacity: 1, x: 0 }}\n        transition={{ delay: 1 }}\n      >\n        <div className=\"text-sm\">\n          <div>Total Wishes: <span className=\"font-bold text-yellow-400\">{totalCount.toLocaleString()}</span></div>\n          <div>Latest: <span className=\"font-bold text-blue-400\">{wishes.length}</span></div>\n        </div>\n      </motion.div>\n\n      {/* Lanterns */}\n      <div className=\"relative w-full h-full\">\n        {wishes.map((wish, index) => (\n          <Lantern\n            key={wish.id || index}\n            wish={wish}\n            index={index}\n          />\n        ))}\n      </div>\n\n      {/* Floating particles effect */}\n      <div className=\"fixed inset-0 pointer-events-none\">\n        {Array.from({ length: 20 }, (_, i) => (\n          <motion.div\n            key={i}\n            className=\"absolute w-1 h-1 bg-yellow-400/50 rounded-full\"\n            style={{\n              left: `${Math.random() * 100}%`,\n              top: `${Math.random() * 100}%`,\n            }}\n            animate={{\n              y: [0, -100, 0],\n              opacity: [0, 1, 0],\n            }}\n            transition={{\n              duration: 4,\n              repeat: Infinity,\n              delay: Math.random() * 4,\n              ease: \"easeInOut\"\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default LanternSky;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}